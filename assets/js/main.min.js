(r=>{r(function(){jQuery(".color-field").wpColorPicker()}),r("#check-all-compress").on("click",function(){this.checked?r(".nslb-input").each(function(){this.checked=!0}):r(".nslb-input").each(function(){this.checked=!1})}),r(".nslb-input").on("click",function(){r(".nslb-input:checked").length==r(".nslb-input").length?r("#check-all-compress").prop("checked",!0):r("#check-all-compress").prop("checked",!1)}),r("#check-all-watermark").on("click",function(){this.checked?r(".nslb-input").each(function(){this.checked=!0}):r(".nslb-input").each(function(){this.checked=!1})}),r(".nslb-input").on("click",function(){r(".nslb-input:checked").length==r(".nslb-input").length?r("#check-all-watermark").prop("checked",!0):r("#check-all-watermark").prop("checked",!1)}),r("input[name$='ilove_pdf_display_settings_format_watermark[ilove_pdf_format_watermark_mode]']").on("change",function(){var e=r(this).val();r("div.watermark-mode").hide(),r("#div-mode"+e).show()});var s=!0,e=(r(".btn-cancel").on("click",function(){s=!1}),0),l=0;function a(i){0==e&&(l=i.length);var n=r("#file-row-"+i[0]).find("td:eq(3)");n.find("a").hide(),r(".all-compressing").show(),n.find(".compressing").show(),e++,r(".all-compressing span").html(e+"/"+l),r(".all-compressing .progress-percent").width(100*e/l+"%"),r.post("admin-post.php?action=ilovepdf_compress&id="+i[0]+"&ajax=1",function(e){var t;""==e||1!=e.status||e.api_error?"error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),n.show()):(n.find(".compressing").hide(),(t=document.createElement("div")).innerHTML=e.api_error,n.find(".error").html(t.innerText).show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&s?a(i):(r(".all-compressing").hide(),r(s?".compress-success":".compress-abort").show(),r("#cancel-compress").hide())):(n.find(".compressing").hide(),n.find(".success").show(),r("#file-row-"+i[0]).find("td:eq(2)").html(e.compress_size),i.splice(0,1),!jQuery.isEmptyObject(i)&&s?a(i):(r(".all-compressing").hide(),r(s?".compress-success":".compress-abort").show(),r("#cancel-compress").hide(),window.setTimeout(function(){r("#stats_total_files_compressed").html(e.total_files),r("#stats_initial_size").html(e.initial_size),r("#stats_current_size").html(e.current_size),r("#stats_total_percentage").html(e.percentage+"%"),r("#stats_total_percentage").parent(".c100").addClass("p"+e.percentage),r("#compress-pdf-list").load(document.URL+" #compress-pdf-list")},2e3)))},"json")}function o(i){0==e&&(l=i.length);var n=r("#file-row-"+i[0]).find("td:eq(2)");n.find("a").hide(),r(".all-applying-watermark").show(),n.find(".applying-watermark").show(),e++,r(".all-applying-watermark span").html(e+"/"+l),r(".all-applying-watermark .progress-percent").width(100*e/l+"%"),r.post("admin-post.php?action=ilovepdf_watermark&id="+i[0]+"&ajax=1",function(e){var t;""==e||1!=e.status||e.api_error?"error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),n.show()):(n.find(".applying-watermark").hide(),(t=document.createElement("div")).innerHTML=e.api_error,n.find(".error").html(t.innerText).show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&s?o(i):(r(".all-applying-watermark").hide(),r(s?".applied-success":".applied-abort").show(),r("#cancel-watermark").hide())):(n.find(".applying-watermark").hide(),n.find(".success").show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&s?o(i):(r(".all-applying-watermark").hide(),r(s?".applied-success":".applied-abort").show(),r("#cancel-watermark").hide(),window.setTimeout(function(){r("#stats_total_files_watermarked").html(e.total_files),r("#watermark-pdf-list").load(document.URL+" #watermark-pdf-list")},2e3)))},"json")}r(".btn-compress-all").on("click",function(){r("#cancel-compress").css("display","inline-block"),r.ajax({type:"POST",url:"admin-post.php?action=ilovepdf_compress_list",success:function(e){var t,e=r.parseJSON(e);""!=e&&1==e.status?(l=e.list_pdf.length,a(e.list_pdf)):((t=document.createElement("div")).innerHTML=e,r(".compress-error").html(t.innerText).show())}})}),window.exportedCompressMultiPDF=a,r(".btn-watermark-all").on("click",function(){r("#cancel-watermark").css("display","inline-block"),r.ajax({type:"POST",url:"admin-post.php?action=ilovepdf_watermark_list",success:function(e){var t,e=r.parseJSON(e);""!=e&&1==e.status?(l=e.list_pdf.length,o(e.list_pdf)):((t=document.createElement("div")).innerHTML=e,r(".applied-error").html(t.innerText).show())}})}),window.exportedWatermarkMultiPDF=o,r(".btn-compress").on("click",function(e){var i=r(this),n=r(this).parent(),s=!1;e.preventDefault(),i.closest(".row-library").find(".btn-watermark").is(":visible")&&(s=!0),i.closest(".row-library").find(".btn-watermark").hide(),r(this).hide(),r(this).nextAll(".compressing").show(),r(this).nextAll(".success").hide(),r.post(r(this).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".compressing").hide(),s&&i.closest(".row-library").find(".btn-watermark").show(),""==e||1!=e.status||e.api_error?("error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),i):((t=document.createElement("div")).innerHTML=e.api_error,1==e.editpdf&&i.nextAll(".error").before("<br /><br />"),i.nextAll(".error").html(t.innerText))).show():(console.log(e.api_error),i.nextAll(".success").show(),r("#stats_total_files_compressed").html(parseInt(r("#stats_total_files_compressed").html())+1),r("#stats_initial_size").html(e.initial_size),r("#stats_current_size").html(e.current_size),r("#stats_total_percentage").html(e.percentage+"%"),r("#stats_total_percentage").parent(".c100").addClass("p"+e.percentage),window.setTimeout(function(){i.nextAll(".success").hide(),1==e.library?i.nextAll(".stats-compress").html('<i class="fa fa-check" aria-hidden="true"></i> Compressed<br />Savings '+e.percent+"%</span>"):(1==e.editpdf?i.prevAll("#current-size").find("strong"):(n.html(e.percent+"%"),n.closest("td").prev("td"))).html(e.compress_size)},3e3))},"json")}),r(".btn-watermark").on("click",function(e){var i=r(this),n=r(this).parent(),s=!1;e.preventDefault(),i.closest(".row-library").find(".btn-compress").is(":visible")&&(s=!0),i.closest(".row-library").find(".btn-compress").hide(),r(this).hide(),r(this).nextAll(".applying-watermark").show(),r(this).prevAll(".stats-compress").hide(),r(this).nextAll(".success").hide(),r.post(r(this).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".applying-watermark").hide(),s&&i.closest(".row-library").find(".btn-compress").show(),""==e||1!=e.status||e.api_error?("error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),i):((t=document.createElement("div")).innerHTML=e.api_error,1==e.editpdf&&i.nextAll(".error").before("<br /><br />"),i.nextAll(".error").html(t.innerText))).show():(i.nextAll(".success").show(),r("#stats_total_files_watermarked").html(parseInt(r("#stats_total_files_watermarked").html())+1),window.setTimeout(function(){i.nextAll(".success").hide(),1==e.library?n.html('<i class="fa fa-check" aria-hidden="true"></i> Stamped'):1==e.editpdf&&n.append('<i class="fa fa-check" aria-hidden="true"></i> Stamped')},3e3))},"json")});var c='\n            <dialog id="ilovepdf-restore-dialog" class="ilovepdf-restore-dialog">\n                <h2 class="ilovepdf-title-dialog">Attention!</h2>\n                <p class="ilovepdf-content-dialog">The changes applied by all the tools will be lost. Do you want to continue?</p>\n                <div class="ilovepdf-btn-groups">\n                    <button id="ilovepdf-dialog-aceptted" class="button-primary">Yes</button>\n                    <button id="ilovepdf-dialog-close" class="button-secondary">Close</button>\n                </div>\n            </dialog>';r(".btn-restore").on("click",function(e){var t=this,i=r(this),n=(e.preventDefault(),r(this).parent().append(c),document.getElementById("ilovepdf-restore-dialog")),e=document.getElementById("ilovepdf-dialog-aceptted"),s=document.getElementById("ilovepdf-dialog-close");n.showModal(),e.addEventListener("click",function(e){e.preventDefault(),n.close(),r(t).hide(),r(t).prev().hide(),r(t).nextAll(".loading").show(),r(t).parent().prevAll(".row-compress-tool").hide(),r(t).parent().prevAll(".row-watermark-tool").hide(),r.post(r(t).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".loading").hide(),(""===e?i.nextAll(".success"):((t=document.createElement("div")).innerHTML=e,i.nextAll(".error").html(t.innerText))).show()})}),s.addEventListener("click",function(e){e.preventDefault(),n.close()})}),r(".ilovepdf--meta-box-container .link-restore, .compat-field-iLovePDF-tools .link-restore").on("click",function(e){var t=r(this)[0].href,i=(e.preventDefault(),r(".ilovepdf--meta-box-container, .compat-field-iLovePDF-tools .field").append(c),document.getElementById("ilovepdf-restore-dialog")),e=document.getElementById("ilovepdf-dialog-aceptted"),n=document.getElementById("ilovepdf-dialog-close");i.showModal(),e.addEventListener("click",function(e){e.preventDefault(),i.close(),location.href=t}),n.addEventListener("click",function(e){e.preventDefault(),i.close()})})})(jQuery);