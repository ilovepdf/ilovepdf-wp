!function(n){"use strict";n(function(){jQuery(".color-field").wpColorPicker()}),n("#check-all-compress").on("click",function(){this.checked?n(".nslb-input").each(function(){this.checked=!0}):n(".nslb-input").each(function(){this.checked=!1})}),n(".nslb-input").on("click",function(){n(".nslb-input:checked").length==n(".nslb-input").length?n("#check-all-compress").prop("checked",!0):n("#check-all-compress").prop("checked",!1)}),n("#check-all-watermark").on("click",function(){this.checked?n(".nslb-input").each(function(){this.checked=!0}):n(".nslb-input").each(function(){this.checked=!1})}),n(".nslb-input").on("click",function(){n(".nslb-input:checked").length==n(".nslb-input").length?n("#check-all-watermark").prop("checked",!0):n("#check-all-watermark").prop("checked",!1)}),n("input[name$='ilove_pdf_display_settings_format_watermark[ilove_pdf_format_watermark_mode]']").on("change",function(){var e=n(this).val();n("div.watermark-mode").hide(),n("#div-mode"+e).show()});var r=!0,e=(n(".btn-cancel").on("click",function(){r=!1}),0),a=0;function l(i){0==e&&(a=i.length);var s=n("#file-row-"+i[0]).find("td:eq(3)");s.find("a").hide(),n(".all-compressing").show(),s.find(".compressing").show(),e++,n(".all-compressing span").html(e+"/"+a),n(".all-compressing .progress-percent").width(100*e/a+"%"),n.post("admin-post.php?action=ilovepdf_compress&id="+i[0]+"&ajax=1",function(e){var t;""==e||1!=e.status||e.api_error?"error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),s.show()):(s.find(".compressing").hide(),(t=document.createElement("div")).innerHTML=e.api_error,s.find(".error").html(t.innerText).show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&r?l(i):(n(".all-compressing").hide(),n(r?".compress-success":".compress-abort").show(),n("#cancel-compress").hide())):(s.find(".compressing").hide(),s.find(".success").show(),n("#file-row-"+i[0]).find("td:eq(2)").html(e.compress_size),i.splice(0,1),!jQuery.isEmptyObject(i)&&r?l(i):(n(".all-compressing").hide(),n(r?".compress-success":".compress-abort").show(),n("#cancel-compress").hide(),window.setTimeout(function(){n("#stats_total_files_compressed").html(e.total_files),n("#stats_initial_size").html(e.initial_size),n("#stats_current_size").html(e.current_size),n("#stats_total_percentage").html(e.percentage+"%"),n("#stats_total_percentage").parent(".c100").addClass("p"+e.percentage),n("#compress-pdf-list").load(document.URL+" #compress-pdf-list")},2e3)))},"json")}function o(i){0==e&&(a=i.length);var s=n("#file-row-"+i[0]).find("td:eq(2)");s.find("a").hide(),n(".all-applying-watermark").show(),s.find(".applying-watermark").show(),e++,n(".all-applying-watermark span").html(e+"/"+a),n(".all-applying-watermark .progress-percent").width(100*e/a+"%"),n.post("admin-post.php?action=ilovepdf_watermark&id="+i[0]+"&ajax=1",function(e){var t;""==e||1!=e.status||e.api_error?"error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),s.show()):(s.find(".applying-watermark").hide(),(t=document.createElement("div")).innerHTML=e.api_error,s.find(".error").html(t.innerText).show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&r?o(i):(n(".all-applying-watermark").hide(),n(r?".applied-success":".applied-abort").show(),n("#cancel-watermark").hide())):(s.find(".applying-watermark").hide(),s.find(".success").show(),i.splice(0,1),!jQuery.isEmptyObject(i)&&r?o(i):(n(".all-applying-watermark").hide(),n(r?".applied-success":".applied-abort").show(),n("#cancel-watermark").hide(),window.setTimeout(function(){n("#stats_total_files_watermarked").html(e.total_files),n("#watermark-pdf-list").load(document.URL+" #watermark-pdf-list")},2e3)))},"json")}n(".btn-compress-all").on("click",function(){n("#cancel-compress").css("display","inline-block"),n.ajax({type:"POST",url:"admin-post.php?action=ilovepdf_compress_list",success:function(e){var t,e=n.parseJSON(e);""!=e&&1==e.status?(a=e.list_pdf.length,l(e.list_pdf)):((t=document.createElement("div")).innerHTML=e,n(".compress-error").html(t.innerText).show())}})}),window.exportedCompressMultiPDF=l,n(".btn-watermark-all").on("click",function(){n("#cancel-watermark").css("display","inline-block"),n.ajax({type:"POST",url:"admin-post.php?action=ilovepdf_watermark_list",success:function(e){var t,e=n.parseJSON(e);""!=e&&1==e.status?(a=e.list_pdf.length,o(e.list_pdf)):((t=document.createElement("div")).innerHTML=e,n(".applied-error").html(t.innerText).show())}})}),window.exportedWatermarkMultiPDF=o,n(".btn-compress").on("click",function(e){var i=n(this),s=n(this).parent(),r=!1;e.preventDefault(),i.closest(".row-library").find(".btn-watermark").is(":visible")&&(r=!0),i.closest(".row-library").find(".btn-watermark").hide(),n(this).hide(),n(this).nextAll(".compressing").show(),n(this).nextAll(".success").hide(),n.post(n(this).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".compressing").hide(),r&&i.closest(".row-library").find(".btn-watermark").show(),""==e||1!=e.status||e.api_error?("error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),i):((t=document.createElement("div")).innerHTML=e.api_error,1==e.editpdf&&i.nextAll(".error").before("<br /><br />"),i.nextAll(".error").html(t.innerText))).show():(console.log(e.api_error),i.nextAll(".success").show(),n("#stats_total_files_compressed").html(parseInt(n("#stats_total_files_compressed").html())+1),n("#stats_initial_size").html(e.initial_size),n("#stats_current_size").html(e.current_size),n("#stats_total_percentage").html(e.percentage+"%"),n("#stats_total_percentage").parent(".c100").addClass("p"+e.percentage),window.setTimeout(function(){i.nextAll(".success").hide(),1==e.library?i.nextAll(".stats-compress").html('<i class="fa fa-check" aria-hidden="true"></i> Compressed<br />Savings '+e.percent+"%</span>"):(1==e.editpdf?i.prevAll("#current-size").find("strong"):(s.html(e.percent+"%"),s.closest("td").prev("td"))).html(e.compress_size)},3e3))},"json")}),n(".btn-watermark").on("click",function(e){var i=n(this),s=n(this).parent(),r=!1;e.preventDefault(),i.closest(".row-library").find(".btn-compress").is(":visible")&&(r=!0),i.closest(".row-library").find(".btn-compress").hide(),n(this).hide(),n(this).nextAll(".applying-watermark").show(),n(this).prevAll(".stats-compress").hide(),n(this).nextAll(".success").hide(),n.post(n(this).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".applying-watermark").hide(),r&&i.closest(".row-library").find(".btn-compress").show(),""==e||1!=e.status||e.api_error?("error_auth"==e.api_error?(tb_show("HAI","#TB_inline?height=240&amp;width=405&amp;inlineId=pricing_ilovepdf&amp;modal=true",null),i):((t=document.createElement("div")).innerHTML=e.api_error,1==e.editpdf&&i.nextAll(".error").before("<br /><br />"),i.nextAll(".error").html(t.innerText))).show():(i.nextAll(".success").show(),n("#stats_total_files_watermarked").html(parseInt(n("#stats_total_files_watermarked").html())+1),window.setTimeout(function(){i.nextAll(".success").hide(),1==e.library?s.html('<i class="fa fa-check" aria-hidden="true"></i> Stamped'):1==e.editpdf&&s.append('<i class="fa fa-check" aria-hidden="true"></i> Stamped')},3e3))},"json")}),n(".btn-restore").on("click",function(e){var i=n(this);e.preventDefault(),Swal.fire({title:"Attention!",text:"The changes applied by all the tools will be lost. Do you want to continue?",icon:"warning",confirmButtonText:"Yes",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button-primary"}}).then(e=>{e.isConfirmed&&(n(this).hide(),n(this).nextAll(".loading").show(),n(this).parent().prevAll(".row-compress-tool").hide(),n(this).parent().prevAll(".row-watermark-tool").hide(),n.post(n(this).prop("href")+"&ajax=1",function(e){var t;i.nextAll(".loading").hide(),(""==e?i.nextAll(".success"):((t=document.createElement("div")).innerHTML=e,i.nextAll(".error").html(t.innerText))).show()}))})}),n(".ilovepdf--meta-box-container .link-restore, .compat-field-iLovePDF-tools .link-restore").on("click",function(e){const t=n(this)[0].href;e.preventDefault(),Swal.fire({title:"Attention!",text:"The changes applied by all the tools will be lost. Do you want to continue?",icon:"warning",confirmButtonText:"Yes",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button-primary"}}).then(e=>{e.isConfirmed&&(location.href=t)})})}(jQuery);